<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>AI News Aggregator Configuration</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <h1>AI News Aggregator Configuration</h1>

  <div id="status"></div>

  <!-- Feeds Section -->
  <div class="container">
    <h2>Feed Sources</h2>
    <div id="feeds-list"></div>
    <button id="add-feed-btn">Add New Feed</button>
    
    <div id="feed-form" class="hidden">
      <h3>Add/Edit Feed</h3>
      <div class="form-group">
        <label>Feed Name</label>
        <input type="text" id="feed-name" placeholder="e.g., Atlassian Blog">
      </div>
      <div class="form-group">
        <label>Feed URL</label>
        <input type="url" id="feed-url" placeholder="https://example.com/feed">
      </div>
      <div class="form-group">
        <label>Keywords (one per line)</label>
        <textarea id="feed-keywords" placeholder="Rovo Agent&#10;Rovo Dev CLI&#10;AI"></textarea>
      </div>
      <div class="form-group">
        <label>
          <input type="checkbox" id="feed-enabled" checked> Enabled
        </label>
      </div>
      <div class="actions">
        <button id="save-feed-btn">Save Feed</button>
        <button class="secondary" id="cancel-feed-btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Topic Mappings Section -->
  <div class="container">
    <h2>Topic â†’ Confluence Mappings</h2>
    <div id="mappings-list"></div>
    <button id="add-mapping-btn">Add New Mapping</button>
    
    <div id="mapping-form" class="hidden">
      <h3>Add/Edit Topic Mapping</h3>
      <div class="form-group">
        <label>Topic/Keyword</label>
        <input type="text" id="mapping-topic" placeholder="e.g., Rovo Agent">
      </div>
      <div class="form-group">
        <label>Confluence Space Key</label>
        <input type="text" id="mapping-space" placeholder="e.g., AI">
      </div>
      <div class="form-group">
        <label>Parent Page Title (optional)</label>
        <input type="text" id="mapping-parent" placeholder="e.g., Rovo Agent Updates">
      </div>
      <div class="actions">
        <button id="save-mapping-btn">Save Mapping</button>
        <button class="secondary" id="cancel-mapping-btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Settings Section -->
  <div class="container">
    <h2>Settings</h2>
    <div class="form-group">
      <label>Schedule Interval (minutes)</label>
      <input type="number" id="schedule-interval" min="60" value="360">
    </div>
    <div class="form-group">
      <label>
        <input type="checkbox" id="ai-summarization"> Enable AI Summarization
      </label>
    </div>
    <div class="form-group">
      <label>Deduplication Window (days)</label>
      <input type="number" id="dedup-window" min="1" value="30">
    </div>
    <div class="actions">
      <button id="save-settings-btn">Save Settings</button>
    </div>
  </div>

  <!-- Actions Section -->
  <div class="container">
    <h2>Actions</h2>
    <div class="actions">
      <button id="process-feeds-btn">Process Feeds Now</button>
      <button class="secondary" id="reload-config-btn">Reload Configuration</button>
    </div>
  </div>

  <script src="js/app.js"></script>
  <script>
    // Initialize event listeners
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('add-feed-btn').addEventListener('click', window.showAddFeedForm);
      document.getElementById('save-feed-btn').addEventListener('click', window.saveFeed);
      document.getElementById('cancel-feed-btn').addEventListener('click', window.cancelFeedForm);
      document.getElementById('add-mapping-btn').addEventListener('click', window.showAddMappingForm);
      document.getElementById('save-mapping-btn').addEventListener('click', window.saveMapping);
      document.getElementById('cancel-mapping-btn').addEventListener('click', window.cancelMappingForm);
      document.getElementById('save-settings-btn').addEventListener('click', window.saveSettings);
      document.getElementById('process-feeds-btn').addEventListener('click', window.processFeedsNow);
      document.getElementById('reload-config-btn').addEventListener('click', window.loadConfiguration);
    });
  </script>
</body>
</html>
