modules:
  jira:globalPage:
    - key: ai-news-global
      function: global-page
      title: AI News Aggregator
      resource: global-page
  function:
    - key: global-page
      handler: src/index.globalPage
    - key: scheduled-trigger
      handler: src/index.scheduledTrigger
    - key: confluence-publisher
      handler: src/index.confluencePublisher
  trigger:
    - key: feed-parser-schedule
      function: scheduled-trigger
      schedule: cron(0 */6 * * ? *)  # Every 6 hours
      # Can be configured via global page UI
  resources:
    - key: global-page
      path: static/global-page.html

permissions:
  external:
    fetch:
      backend:
        - 'https://*.atlassian.com'
        - 'https://*.atlassian.net'
        - 'https://*.linkedin.com'
        - 'https://community.atlassian.com'
        - 'https://*.rss'
        - 'https://*.atom'
        - 'https://*.feed'
  storage:
    app: read-write
  confluence:
    content:
      - read
      - write
  jira:
    - read

app:
  id: ari:cloud:ecosystem::app/your-app-id
  runtime:
    name: nodejs20.x

