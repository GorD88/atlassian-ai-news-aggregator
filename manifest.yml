modules:
  function:
    - key: global-page-handler
      handler: index.globalPage
    - key: scheduled-trigger
      handler: index.scheduledTrigger
    - key: confluence-publisher
      handler: index.confluencePublisher
  trigger:
    - key: feed-parser-schedule
      function: scheduled-trigger
      events:
        - scheduled:feed-parser-schedule
  confluence:globalPage:
    - key: ai-news-global
      title: AI News Aggregator
      route: ai-news
      resource: application
      resolver:
        function: global-page-handler

permissions:
  external:
    fetch:
      backend:
        - address: https://*.atlassian.com
        - address: https://*.atlassian.net
        - address: https://*.linkedin.com
        - address: https://community.atlassian.com
        - address: https://*.rss
        - address: https://*.atom
        - address: https://*.feed
  scopes:
    - read:confluence-content.all
    - storage:app
  content:
    styles:
      - unsafe-inline

resources:
  - key: application
    path: static/main

app:
  id: ari:cloud:ecosystem::app/2db096a8-4660-4886-800c-eb89dc97d5bf
  runtime:
    name: nodejs20.x
